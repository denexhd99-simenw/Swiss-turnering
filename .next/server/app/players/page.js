(()=>{var e={};e.id=292,e.ids=[292],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},958:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=s(482),n=s(9108),a=s(2563),l=s.n(a),i=s(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["players",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3442)),"C:\\Users\\25simwek\\Downloads\\pingpong-turnering\\app\\players\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"C:\\Users\\25simwek\\Downloads\\pingpong-turnering\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\25simwek\\Downloads\\pingpong-turnering\\app\\players\\page.tsx"],p="/players/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/players/page",pathname:"/players",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9672:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,1476,23))},1506:(e,t,s)=>{Promise.resolve().then(s.bind(s,6506))},999:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},6506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(5344);let n=(0,s(1091).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var a=s(3729),l=s(6828),i=s(207),o=s(9038),d=s(5986),c=s(2274),p=s(8651);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class x extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,s=(0,c.R)(e)&&e.offsetWidth||0,r=(0,c.R)(e)&&e.offsetHeight||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=s-n.width-n.left,n.bottom=r-n.height-n.top}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:t,anchorX:s,anchorY:n,root:l,pop:i}){let o=(0,a.useId)(),d=(0,a.useRef)(null),c=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=(0,a.useContext)(p._),m=function(...e){return a.useCallback(function(...e){return t=>{let s=!1,r=e.map(e=>{let r=u(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():u(e[t],null)}}}}(...e),e)}(d,e.props?.ref??e?.ref);return(0,a.useInsertionEffect)(()=>{let{width:e,height:r,top:a,left:p,right:u,bottom:x}=c.current;if(t||!1===i||!d.current||!e||!r)return;let m="left"===s?`left: ${p}`:`right: ${u}`,f="bottom"===n?`bottom: ${x}`:`top: ${a}`;d.current.dataset.motionPopId=o;let g=document.createElement("style");h&&(g.nonce=h);let b=l??document.head;return b.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            ${m}px !important;
            ${f}px !important;
          }
        `),()=>{b.contains(g)&&b.removeChild(g)}},[t]),(0,r.jsx)(x,{isPresent:t,childRef:d,sizeRef:c,pop:i,children:!1===i?e:a.cloneElement(e,{ref:m})})}let m=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:l,presenceAffectsLayout:o,mode:c,anchorX:p,anchorY:u,root:x})=>{let m=(0,i.h)(f),g=(0,a.useId)(),b=!0,j=(0,a.useMemo)(()=>(b=!1,{id:g,initial:t,isPresent:s,custom:l,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;n&&n()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[s,m,n]);return o&&b&&(j={...j}),(0,a.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[s]),a.useEffect(()=>{s||m.size||!n||n()},[s]),e=(0,r.jsx)(h,{pop:"popLayout"===c,isPresent:s,anchorX:p,anchorY:u,root:x,children:e}),(0,r.jsx)(d.O.Provider,{value:j,children:e})};function f(){return new Map}var g=s(4146);let b=e=>e.key||"";function j(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let v=({children:e,custom:t,initial:s=!0,onExitComplete:n,presenceAffectsLayout:d=!0,mode:c="sync",propagate:p=!1,anchorX:u="left",anchorY:x="top",root:h})=>{let[f,v]=(0,g.oO)(p),y=(0,a.useMemo)(()=>j(e),[e]),N=p&&!f?[]:y.map(b),w=(0,a.useRef)(!0),k=(0,a.useRef)(y),P=(0,i.h)(()=>new Map),C=(0,a.useRef)(new Set),[S,E]=(0,a.useState)(y),[_,M]=(0,a.useState)(y);(0,o.L)(()=>{w.current=!1,k.current=y;for(let e=0;e<_.length;e++){let t=b(_[e]);N.includes(t)?(P.delete(t),C.current.delete(t)):!0!==P.get(t)&&P.set(t,!1)}},[_,N.length,N.join("-")]);let D=[];if(y!==S){let e=[...y];for(let t=0;t<_.length;t++){let s=_[t],r=b(s);N.includes(r)||(e.splice(t,0,s),D.push(s))}return"wait"===c&&D.length&&(e=D),M(j(e)),E(y),null}let{forceRender:R}=(0,a.useContext)(l.p);return(0,r.jsx)(r.Fragment,{children:_.map(e=>{let a=b(e),l=(!p||!!f)&&(y===_||N.includes(a));return(0,r.jsx)(m,{isPresent:l,initial:(!w.current||!!s)&&void 0,custom:t,presenceAffectsLayout:d,mode:c,root:h,onExitComplete:l?void 0:()=>{if(C.current.has(a)||(C.current.add(a),!P.has(a)))return;P.set(a,!0);let e=!0;P.forEach(t=>{t||(e=!1)}),e&&(R?.(),M(k.current),p&&v?.(),n&&n())},anchorX:u,anchorY:x,children:e},a)})})};var y=s(8034);function N(){let[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[i,o]=(0,a.useState)({}),[d,c]=(0,a.useState)(""),[p,u]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[m,f]=(0,a.useState)([]),[g,b]=(0,a.useState)([]),[j,N]=(0,a.useState)(""),[w,k]=(0,a.useState)("");async function P(){let[e,t]=await Promise.all([fetch("/api/players"),fetch("/api/departments")]);b(await e.json()),f(await t.json())}async function C(){e&&(await fetch("/api/players",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),t(null),P())}async function S(){x.trim()&&(await fetch("/api/departments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x.trim()})}),h(""),k(""),P())}async function E(e){if(e.preventDefault(),N(""),!d||!p){N("Fyll inn namn og vel avdeling");return}if(!(await fetch("/api/players",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,departmentId:p})})).ok){N("Noko gjekk gale");return}c(""),u(""),P()}async function _(){if(!s)return;let e=g.filter(e=>e.department.id===s),t=m.filter(e=>e.id!==s);if(e.length>0&&0===t.length){k("Du maa ha minst ei anna avdeling for aa flytte spelarane.");return}let r=e.map(e=>({playerId:e.id,departmentId:Number(i[e.id])}));if(e.length>0&&r.some(e=>!Number.isInteger(e.departmentId))){k("Vel ny avdeling for alle spelarane.");return}let n=await fetch("/api/departments",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({departmentId:s,reassignments:r})});if(!n.ok){let e=await n.json().catch(()=>null);k(e?.error??"Kunne ikkje slette avdeling.");return}l(null),o({}),k(""),P()}(0,a.useEffect)(()=>{P()},[]);let M=(0,a.useMemo)(()=>m.find(e=>e.id===s)??null,[s,m]),D=(0,a.useMemo)(()=>g.filter(e=>e.department.id===s),[g,s]),R=(0,a.useMemo)(()=>m.filter(e=>e.id!==s),[m,s]);return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-blue-950 py-12 text-white",children:[(0,r.jsxs)("div",{className:"mx-auto max-w-5xl space-y-10 px-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Bordtennis-turnering"}),r.jsx("p",{className:"mt-2 text-slate-400",children:"Intern raadhus-konkurranse"})]}),(0,r.jsxs)("div",{className:"grid gap-8 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-slate-800/70 p-6 shadow-xl backdrop-blur",children:[r.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"Meld deg paa"}),(0,r.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[r.jsx("input",{value:d,onChange:e=>c(e.target.value),placeholder:"Ditt namn",className:"w-full rounded-xl border border-slate-600 bg-slate-900 px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsxs)("select",{value:p,onChange:e=>u(Number(e.target.value)),className:"w-full rounded-xl border border-slate-600 bg-slate-900 px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Vel avdeling"}),m.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]}),r.jsx("button",{className:"w-full rounded-xl bg-blue-600 py-3 text-lg font-semibold transition hover:bg-blue-700",children:"Registrer"}),j&&r.jsx("p",{className:"text-red-400",children:j})]})]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-slate-800/70 p-6 shadow-xl backdrop-blur",children:[r.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"Ny avdeling"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("input",{value:x,onChange:e=>h(e.target.value),placeholder:"Skriv namn paa avdeling",className:"flex-1 rounded-xl border border-slate-600 bg-slate-900 px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("button",{onClick:S,className:"rounded-xl bg-blue-600 px-5 py-3 font-medium transition hover:bg-blue-700",children:"Legg til"})]}),(0,r.jsxs)("div",{className:"mt-6 space-y-2",children:[r.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-300",children:"Avdelingar"}),m.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-slate-700 bg-slate-900/70 px-3 py-2",children:[r.jsx("span",{children:e.name}),r.jsx("button",{onClick:()=>(function(e){k(""),l(e);let t=g.filter(t=>t.department.id===e),s=m.filter(t=>t.id!==e),r={};for(let e of t)r[e.id]=s[0]?.id??"";o(r)})(e.id),className:"text-red-500 transition hover:text-red-400",title:"Slett avdeling",children:r.jsx(n,{size:18})})]},e.id))]})]})]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-slate-800/70 p-6 shadow-xl backdrop-blur",children:[r.jsx("h2",{className:"mb-6 text-2xl font-semibold",children:"Deltakarar"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-lg",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-slate-700 text-slate-400",children:[r.jsx("th",{className:"pb-3 text-left",children:"Namn"}),r.jsx("th",{className:"pb-3 text-left",children:"Avdeling"}),r.jsx("th",{className:"pb-3 text-right",children:"Poeng"}),r.jsx("th",{className:"pb-3 text-right",children:"Slett"})]})}),r.jsx("tbody",{children:g.map(e=>(0,r.jsxs)("tr",{className:"border-b border-slate-700 transition hover:bg-slate-700/40",children:[r.jsx("td",{className:"py-3",children:e.name}),r.jsx("td",{children:e.department.name}),r.jsx("td",{className:"text-right font-semibold text-blue-400",children:e.points}),r.jsx("td",{className:"text-right",children:r.jsx("button",{onClick:()=>t(e.id),className:"text-red-500 transition hover:text-red-400",children:r.jsx(n,{size:20})})})]},e.id))})]})})]})]}),r.jsx(v,{children:e&&r.jsx(y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,r.jsxs)(y.E.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"w-[400px] rounded-2xl border border-slate-700 bg-slate-900 p-8 shadow-2xl",children:[r.jsx("h3",{className:"mb-4 text-2xl font-bold text-red-500",children:"Slett spelar"}),(0,r.jsxs)("p",{className:"mb-6 text-slate-300",children:["Er du sikker paa at du vil slette denne spelaren?",r.jsx("br",{}),"Dette kan ikkje angrast."]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{onClick:()=>t(null),className:"rounded-lg bg-slate-700 px-4 py-2 hover:bg-slate-600",children:"Avbryt"}),r.jsx("button",{onClick:C,className:"rounded-lg bg-red-600 px-4 py-2 hover:bg-red-700",children:"Ja, slett"})]})]})})}),r.jsx(v,{children:s&&M&&r.jsx(y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,r.jsxs)(y.E.div,{initial:{scale:.92},animate:{scale:1},exit:{scale:.92},className:"w-[560px] rounded-2xl border border-slate-700 bg-slate-900 p-8 shadow-2xl",children:[r.jsx("h3",{className:"mb-3 text-2xl font-bold text-red-500",children:"Slett avdeling"}),(0,r.jsxs)("p",{className:"mb-5 text-slate-300",children:["Du slettar ",r.jsx("span",{className:"font-semibold text-white",children:M.name}),"."]}),D.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-slate-300",children:"Vel ny avdeling for kvar spelar i denne avdelinga:"}),r.jsx("div",{className:"max-h-[260px] space-y-3 overflow-y-auto pr-1",children:D.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_1fr] gap-3",children:[r.jsx("div",{className:"rounded-lg bg-slate-800 px-3 py-2 text-sm",children:e.name}),(0,r.jsxs)("select",{value:i[e.id]??"",onChange:t=>o(s=>({...s,[e.id]:t.target.value?Number(t.target.value):""})),className:"rounded-lg border border-slate-600 bg-slate-800 px-3 py-2 text-sm text-white",children:[r.jsx("option",{value:"",children:"Vel ny avdeling"}),R.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]},e.id))})]}):r.jsx("p",{className:"text-sm text-slate-300",children:"Ingen spelarar er knytte til denne avdelinga."}),w&&r.jsx("p",{className:"mt-4 text-sm text-red-400",children:w}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[r.jsx("button",{onClick:()=>{l(null),o({}),k("")},className:"rounded-lg bg-slate-700 px-4 py-2 hover:bg-slate-600",children:"Avbryt"}),r.jsx("button",{onClick:_,className:"rounded-lg bg-red-600 px-4 py-2 hover:bg-red-700",children:"Slett avdeling"})]})]})})})]})}},2917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(5036);s(7272);var n=s(6274),a=s(587),l=s(2947),i=s(6682),o=s(8953);function d({children:e}){return r.jsx("html",{lang:"no",children:r.jsx("body",{className:"bg-gradient-to-br from-slate-950 to-blue-950 text-white",children:(0,r.jsxs)("div",{className:"min-h-screen",children:[r.jsx("nav",{className:"border-b border-slate-800 bg-slate-900/60 backdrop-blur",children:(0,r.jsxs)("div",{className:"max-w-[83rem] mx-auto px-6 py-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 text-xl font-bold",children:[r.jsx(a.Z,{className:"text-blue-500"}),"Bordtennis Dashboard"]}),(0,r.jsxs)("div",{className:"flex gap-6 text-slate-300",children:[(0,r.jsxs)(n.default,{href:"/",className:"hover:text-white flex items-center gap-2",children:[r.jsx(l.Z,{size:18}),"Oversikt"]}),(0,r.jsxs)(n.default,{href:"/players",className:"hover:text-white flex items-center gap-2",children:[r.jsx(i.Z,{size:18}),"P\xe5melding"]}),(0,r.jsxs)(n.default,{href:"/leaderboard",className:"hover:text-white flex items-center gap-2",children:[r.jsx(a.Z,{size:18}),"Leaderboard"]}),(0,r.jsxs)(n.default,{href:"/admin",className:"hover:text-white flex items-center gap-2",children:[r.jsx(o.Z,{size:18}),"Admin"]})]})]})}),r.jsx("main",{className:"max-w-[83rem] mx-auto px-6 py-10",children:e})]})})})}},3442:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>n,default:()=>l});let r=(0,s(6843).createProxy)(String.raw`C:\Users\25simwek\Downloads\pingpong-turnering\app\players\page.tsx`),{__esModule:n,$$typeof:a}=r,l=r.default},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,136,265],()=>s(958));module.exports=r})();