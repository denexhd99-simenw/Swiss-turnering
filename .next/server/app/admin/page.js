(()=>{var e={};e.id=3,e.ids=[3],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1032:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=a(482),n=a(9108),s=a(2563),l=a.n(s),i=a(8300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(t,d);let o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9481)),"C:\\Users\\25simwek\\Downloads\\pingpong-turnering\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2917)),"C:\\Users\\25simwek\\Downloads\\pingpong-turnering\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\25simwek\\Downloads\\pingpong-turnering\\app\\admin\\page.tsx"],p="/admin/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2009:(e,t,a)=>{Promise.resolve().then(a.bind(a,199))},199:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(5344),n=a(3729),s=a(5002);function l(){let[e,t]=(0,n.useState)(!1),[a,l]=(0,n.useState)(""),[i,d]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[p,m]=(0,n.useState)(null),[u,x]=(0,n.useState)(!1),[g,h]=(0,n.useState)(null);async function b(){let[e,t]=await Promise.all([fetch("/api/players").then(e=>e.json()),fetch("/api/matches").then(e=>e.json())]);d(e),c(t)}async function y(){await fetch("/api/swiss/start",{method:"POST"}),await b()}async function f(e,t){m(e),c(a=>a.map(a=>a.id===e?{...a,winnerId:t}:a)),await fetch(`/api/matches/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winnerId:t})}),await b(),m(null)}async function v(){x(!0),await fetch("/api/knockout/start",{method:"POST"}),await b(),x(!1)}(0,n.useEffect)(()=>{if(!e)return;b();let t=setInterval(b,3e3);return()=>clearInterval(t)},[e]);let w=(0,n.useMemo)(()=>o.some(e=>"KNOCKOUT"===e.phase),[o]),j=(0,n.useMemo)(()=>o.filter(e=>"SWISS"===e.phase&&e.player2&&!e.winnerId),[o]),k=(0,n.useMemo)(()=>i.filter(e=>e.wins>=3),[i]),N=(0,n.useMemo)(()=>!w&&0===j.length&&k.length>=2,[w,j.length,k.length]),S=(0,n.useMemo)(()=>{let e=o.filter(e=>"SWISS"===e.phase&&e.player2&&!e.winnerId),t=o.filter(e=>"KNOCKOUT"===e.phase&&e.player2&&!e.winnerId),a=e.length>0?e:t,r=a.map(e=>e.round),n=r.length?Math.min(...r):null;return{currentRound:n,phase:e.length>0?"SWISS":t.length>0?"KNOCKOUT":null,matches:n?a.filter(e=>e.round===n):[]}},[o]);return e?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"rounded-2xl border border-cyan-500/40 bg-gradient-to-r from-slate-950 via-[#0a2047] to-slate-950 p-6",children:[r.jsx("h1",{className:"text-4xl font-black tracking-wide text-cyan-200",children:"Admin Swiss Kontroll"}),r.jsx("p",{className:"mt-2 text-slate-300",children:"Klikk direkte paa vinnaren i kvar kamp."}),r.jsx("button",{onClick:y,className:"mt-5 rounded-lg bg-emerald-600 px-6 py-2 font-bold text-white hover:bg-emerald-500",children:"Start turnering"}),N&&r.jsx("button",{onClick:v,disabled:u,className:"ml-3 mt-5 rounded-lg bg-amber-500 px-6 py-2 font-bold text-slate-950 hover:bg-amber-400 disabled:opacity-60",children:"Start vinn-eller-forsvinn"})]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-cyan-500/30 bg-slate-950/60 p-4",children:[r.jsx("label",{className:"mb-2 block text-sm font-semibold text-cyan-300",children:"Marker spelar"}),(0,r.jsxs)("select",{value:g??"",onChange:e=>h(e.target.value?Number(e.target.value):null),className:"w-full rounded-lg border border-cyan-500/40 bg-[#07162f] px-4 py-2 text-white md:w-[340px]",children:[r.jsx("option",{value:"",children:"Vis alle"}),i.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),r.jsx(s.Z,{players:i,matches:o,selectedPlayerId:g}),(0,r.jsxs)("div",{className:"rounded-2xl border border-amber-500/40 bg-slate-950/75 p-6",children:[r.jsx("h2",{className:"mb-1 text-2xl font-black tracking-wide text-amber-300",children:"Aktive kampar"}),r.jsx("p",{className:"mb-5 text-slate-400",children:S.currentRound?`${"SWISS"===S.phase?"Swiss":"Knockout"} runde ${S.currentRound}`:w?"Knockout ferdig, vinnar staar igjen.":"Ingen opne kampar akkurat no"}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[S.matches.map(e=>(0,r.jsxs)("div",{className:"rounded-xl border border-amber-400/50 bg-[#0c1b33] p-4",children:[(0,r.jsxs)("div",{className:"mb-3 text-xs font-bold text-amber-300",children:["Kamp #",e.id]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("button",{disabled:p===e.id||!e.player1,onClick:()=>e.player1&&f(e.id,e.player1.id),className:`rounded-lg px-3 py-3 text-left font-semibold transition ${e.winnerId===e.player1?.id?"bg-emerald-600 text-white":"bg-slate-800 text-slate-100 hover:bg-emerald-700/70"}`,children:e.player1?.name??"TBA"}),r.jsx("button",{disabled:p===e.id||!e.player2,onClick:()=>e.player2&&f(e.id,e.player2.id),className:`rounded-lg px-3 py-3 text-left font-semibold transition ${e.winnerId===e.player2?.id?"bg-emerald-600 text-white":"bg-slate-800 text-slate-100 hover:bg-emerald-700/70"}`,children:e.player2?.name??"TBA"})]})]},e.id)),0===S.matches.length&&r.jsx("div",{className:"rounded-xl border border-dashed border-slate-700 p-5 text-sm text-slate-400",children:"Ventar paa neste runde eller turnering er ferdig."})]})]})]}):r.jsx("div",{className:"flex min-h-[70vh] items-center justify-center",children:(0,r.jsxs)("div",{className:"w-[420px] rounded-2xl border border-cyan-500/30 bg-slate-950/85 p-8",children:[r.jsx("h2",{className:"mb-5 text-2xl font-black tracking-wide text-cyan-200",children:"Admin Login"}),r.jsx("input",{type:"password",placeholder:"Passord",value:a,onChange:e=>l(e.target.value),className:"mb-4 w-full rounded-lg border border-cyan-500/40 bg-[#07162f] px-4 py-3 text-white"}),r.jsx("button",{onClick:()=>t("admin"===a),className:"w-full rounded-lg bg-cyan-600 py-3 font-bold text-white hover:bg-cyan-500",children:"Logg inn"})]})})}},9481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>s,__esModule:()=>n,default:()=>l});let r=(0,a(6843).createProxy)(String.raw`C:\Users\25simwek\Downloads\pingpong-turnering\app\admin\page.tsx`),{__esModule:n,$$typeof:s}=r,l=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[638,136,950],()=>a(1032));module.exports=r})();